"use strict";!function(a){a.fn.dynaform=function(b){function e(){var b=a(c.body);return d.buttom&&(b.find(".modal-body").before(c.header),b.find(".modal-title").html(d.title)),b.find(".modal-body").after(a(c.footer).append(a(c.sendButton).html(d.buttom))),d.modal?(b.find(".modal-title").prepend(c.closeButton),b.addClass("modal")):(b.addClass("no-modal"),b.find('[class*="modal"]').each(function(b){a(this).addClass(a(this).attr("class").replace(/modal-+/g,"")).removeClass(function(a,b){return(b.match(/\modal-\S+/g)||[]).join(" ")})})),b}function f(){var d=a("<div/>");return a.each(c.inputsDefault,function(b,e){d.append(a(c.formGroup).html(e))}),a.each(b.fields,function(b,e){if("object"==typeof e){var f=a(c.inputs.select).attr("name",b);f.append(a("<option/>").attr({value:""}).text(g(b))),a.each(e,function(b,c){f.append(a("<option/>").attr({value:c}).text(c))}),d.append(a(c.formGroup).html(f))}}),d}function g(a){return(a+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function h(b){if(b.preventDefault(),k(this)){var c=l(this);a.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",cache:!1,url:d.postUrl,data:{token:d.token,secret:d.secret,fields:JSON.stringify(c)},success:i,error:j})}return!1}function i(){alert(d.success)}function j(){alert(d.error)}function k(b){var c=!0;return a(b).find(".requerid").each(function(b,d){if(!a(d).val())return alert("Input "+a(d).attr("placeholder")+" requerid."),a(d).focus(),c=!1}),c}function l(b){var c={},d=a(b).serializeArray();return a.each(d,function(){c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""}),c}var c={body:'<div class="dynaform" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body content-body"></div></div></div></div>',header:'<div class="modal-header"><h4 class="modal-title"></h4></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden=true">&times;</span></button>',formGroup:'<div class="form-group"></div>',inputsDefault:['<input class="form-control requerid" placeholder="Nome" name="name" />','<input placeholder="E-mail" class="form-control requerid" name="email" />'],inputs:{select:'<select class="form-control"></select>'},sendButton:'<button type="submit" class="btn btn-primary"></button>'},d=a.extend({token:"",secret:"",modal:!1,fields:{},title:"Title Plugin‚Äè",buttom:"Send",success:"Sucess",error:"Error",postUrl:null},b);return d.modal&&"function"!=typeof a().modal&&(d.modal=!1),this.each(function(){var b=e(),c=f();b.find(".content-body").html(c),d.modal?(a("body").append(a("<form/>").html(b)),a(this).on("click",function(){a(b).modal("show")})):a(this).html(a("<form/>").html(b)),b.closest("form").on("submit",h)})}}(jQuery);